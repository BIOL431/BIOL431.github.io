<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BIOL 431/531: Ecological Modeling - 8&nbsp; Lab 4: Data visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lab3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lab4.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 4: Data visualization</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">BIOL 431/531: Ecological Modeling</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome to BIOL 431</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Thinking like a Modeler</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1: Getting comfortable in R and RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hypotheses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Hypotheses and Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Random Variables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Lab 2: Data structures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Simulation and Probability</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linearmodels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Components of linear models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lab 3: Functions and for loops</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 4: Data visualization</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="3">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#principles-of-good-plot-design" id="toc-principles-of-good-plot-design" class="nav-link active" data-scroll-target="#principles-of-good-plot-design"><span class="header-section-number">8.1</span> Principles of good plot design</a></li>
  <li><a href="#plot-types" id="toc-plot-types" class="nav-link" data-scroll-target="#plot-types"><span class="header-section-number">8.2</span> Plot types</a>
  <ul class="collapse">
  <li><a href="#maps" id="toc-maps" class="nav-link" data-scroll-target="#maps"><span class="header-section-number">8.2.1</span> Maps</a></li>
  </ul></li>
  <li><a href="#color-choice" id="toc-color-choice" class="nav-link" data-scroll-target="#color-choice"><span class="header-section-number">8.3</span> Color choice</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 4: Data visualization</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Figures are one of the main ways we communicate our findings as scientists, both to each other and to people outside our disciplines (e.g., policymakers, journalists, local communities). A good figure can convey all the main results of a paper and should stand on its own, i.e., it should be interpretable without the text for context. If a research team has done a good job on their figures, you quite frankly don’t even need to read the paper, just the figures. Of course, that isn’t always the case, but you should strive to be one of those people whose figures speak for themselves! For this week’s lab, we are going to practice creating figures that are information-rich, tell a story, and are aesthetically pleasing.</p>
<section id="principles-of-good-plot-design" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="principles-of-good-plot-design"><span class="header-section-number">8.1</span> Principles of good plot design</h2>
<p>There are a lot of design principles out there when you’re creating conceptual figures to illustrate a point, or doing design of any kind, but today we are focused just on what makes for a good plot. More specifically, my top ten pieces of advice and/or pet peeves to avoid because they make it more difficult for readers to understand your results.</p>
<p><strong>1. Think about your message and how to convey it</strong></p>
<p>Before you sit down to create a figure, think about what information you are trying to convey to your reader. What is it about your data or results you want them to understand? Sketching out a storyboard version can help.</p>
<p><strong>2. Control how your reader interacts with your figure</strong> Most people read top to bottom and left to right, meaning the first place they will look in your figure is the top left corner. If you want to control the order in which they process information, you should also start in the top left. It also means that the bottom right corner is the last thing they will view. There is a reason many advertisements or flyers have the brand logo in the bottom right corner.</p>
<p><strong>3. Only include necessary information</strong> Similar to thinking about your key message, you should only include information in your plot that is necessary. Just because you <em>could</em> add something doesn’t mean you <em>should</em> because it may just distract from the message.</p>
<p><strong>4. Do not include redundant information</strong> Primarily, this principle applies to colors and symbols. Sometimes, you will see a plot where the research team has used colors and symbols redundantly. For example, red triangles are one species, and green stars are another. Those two schemes convey redundant information. Either just use red and green, or triangles and stars, not both. But, preferably, don’t use red and green because of colorblindness. Another place this shows up is with figure headers: 99% of the time, you do not need a figure header because chances are good you will label it something like “y over x” and that is completely redundant to looking at your y and x axes. It just adds visual clutter.</p>
<p><strong>5. Always show the raw data</strong> Unless you are dealing with something like thousands and thousands of data points, always, always, <em>always</em> show the raw data in your figure. Do not include just trend lines or model outputs without showing the data used to fit the model. The same thing goes for descriptive plots: if you are going to use e.g.&nbsp;a boxplot to show the spread of data, include the raw data points. It tells us far more about your data than just things like the median and quartiles.</p>
<p><strong>6. Color conveys, and should always have, meaning</strong> Do not include colors just to make a figure pretty. If you do not need to use color, stick with black and white. Only use color when it actually conveys information. Also, color <em>always</em> conveys information, and people have internalized some values or ideas associated with certain colors (though of course this varies from culture to culture). If you were to plot climate change anomalies with red indicating low temperatures and blue indicating high temperatures, you’re making your reader do mental gymnastics to interpret the figure.</p>
<p><strong>7. Use vectors, or high resolution images, whenever possible</strong> Vectors represent images with equations. You can zoom in on them infinitely and still have a nice crisp edge. Flattened or rasterized images, however, represent images with pixels and are grainy at different resolutions. When possible, use things like .svg (scalable vector graphics) files for figures. If you do need to work with flattened images (e.g., things like .png or .tiff), try to keep them as high resolution as possible. When you send figures to a journal, aim for at least something like 300 dpi (dots per inch) or better.</p>
<p><strong>8. Make big, readable labels and axes</strong> Your axes should be extremely visible and easy to read, as should your axes. And for that matter, always rotate your y-axis labels so that they are horizontal! No one wants to turn their head sideways to read your axes. Use font size (not things like bold or italics) to emphasize important information, and stick with a clear hierarchy. The only time you should use italics in a figure is for species’ names.</p>
<p><strong>9. Be consistent in symbol and color use</strong> Don’t switch what things mean partway through your plots. It will confuse your readers.</p>
<p><strong>10. Never use pie charts</strong> Pie charts are terrible. People are horrible at visualizing the shape of a triangle, let alone a wedge, and it makes it really difficult to compare values across wedges. Just don’t use them. The one exception is when you are showing things like genotype frequencies across a landscape.</p>
</section>
<section id="plot-types" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="plot-types"><span class="header-section-number">8.2</span> Plot types</h2>
<p>For lab today, we are going to work with a hot-off-the-press dataset on characteristics of burned forests which was just posted on (DataDryad)[https://doi.org/10.5061/dryad.gtht76j1k] in February 2026 to accompany a (preprint by Fortin et al.)[https://doi.org/10.1101/2025.05.17.654490] on fire severity and forest resilience. Go to Dryad to download the dataset, and make a note of where you save the file to because you will need to read it from that location.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Downloads/dataset.csv"</span>, <span class="at">sep=</span><span class="st">";"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect it to see what we are dealing with</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     id_unique stocking_bs_jp id_fire time_since_fire latitude longitude
1   2017199512              0  1995_1              22 50.24880 -70.97428
2 20192005R036              0  2005_1              14 50.01966 -73.22733
3 20192005R010              0  2005_2              14 50.50227 -72.60300
4 20192005P032              0  2005_2              14 50.50823 -72.59772
5 20192005P045              0  2005_2              14 50.48655 -72.62847
6 20192005P018              0  2005_3              14 50.26300 -72.35689
  seasonality_real_date seasonality_adjusted      CBI sphagnum_cover
1            1995-08-11                  105 2.458049       2.197802
2            2005-06-06                   38 2.131120       0.000000
3            2005-06-03                   39 2.340567       2.197802
4            2005-06-03                   38 2.613732       0.000000
5            2005-06-02                   39 2.183697       0.000000
6            2005-06-03                   34 2.610222       0.000000
  ericaceous_cover   rom_med age basal_area_prefire_bs prefire_bs_proportion
1         64.81481 180.00000 197             13.135343             100.00000
2         24.07407  76.66667  91              5.166914              56.97487
3         55.55556 267.50000 121             10.127553             100.00000
4         73.14815 200.00000  89             13.218331             100.00000
5         27.77778  84.00000  85              4.751816              88.76695
6         42.59259 120.00000  85             11.042641              64.68542
  seedlings_ha_bs seedlings_ha_jp seedlings_ha_bl
1               0               0               0
2               0            1500               0
3               0               0               0
4               0               0               0
5               0             500               0
6               0               0             250</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id_unique         stocking_bs_jp     id_fire          time_since_fire
 Length:539         Min.   : 0.000   Length:539         Min.   : 4.00  
 Class :character   1st Qu.: 2.000   Class :character   1st Qu.: 8.00  
 Mode  :character   Median : 4.000   Mode  :character   Median :10.00  
                    Mean   : 4.245                      Mean   :10.48  
                    3rd Qu.: 6.000                      3rd Qu.:12.00  
                    Max.   :10.000                      Max.   :22.00  
    latitude       longitude      seasonality_real_date seasonality_adjusted
 Min.   :49.70   Min.   :-73.58   Length:539            Min.   : 34.00      
 1st Qu.:50.28   1st Qu.:-71.97   Class :character      1st Qu.: 57.00      
 Median :50.70   Median :-71.69   Mode  :character      Median : 68.00      
 Mean   :50.67   Mean   :-71.09                         Mean   : 68.51      
 3rd Qu.:50.83   3rd Qu.:-71.02                         3rd Qu.: 89.00      
 Max.   :51.90   Max.   :-67.68                         Max.   :105.00      
      CBI        sphagnum_cover   ericaceous_cover    rom_med     
 Min.   :1.133   Min.   : 0.000   Min.   :  0.00   Min.   : 30.0  
 1st Qu.:1.954   1st Qu.: 0.000   1st Qu.: 25.00   1st Qu.:110.8  
 Median :2.163   Median : 0.000   Median : 39.81   Median :157.0  
 Mean   :2.134   Mean   : 3.908   Mean   : 39.58   Mean   :178.2  
 3rd Qu.:2.359   3rd Qu.: 4.396   3rd Qu.: 51.85   3rd Qu.:226.5  
 Max.   :2.743   Max.   :58.242   Max.   :100.00   Max.   :920.0  
      age        basal_area_prefire_bs prefire_bs_proportion seedlings_ha_bs 
 Min.   : 46.5   Min.   : 0.1698       Min.   : 50.01        Min.   :     0  
 1st Qu.:106.5   1st Qu.: 5.9281       1st Qu.: 88.37        1st Qu.:  1000  
 Median :146.0   Median : 9.1828       Median : 98.17        Median :  2750  
 Mean   :158.1   Mean   :10.9349       Mean   : 91.79        Mean   :  6397  
 3rd Qu.:197.0   3rd Qu.:13.6174       3rd Qu.:100.00        3rd Qu.:  6750  
 Max.   :358.0   Max.   :37.3421       Max.   :100.00        Max.   :151000  
 seedlings_ha_jp seedlings_ha_bl 
 Min.   :    0   Min.   :   0.0  
 1st Qu.:    0   1st Qu.:   0.0  
 Median :    0   Median :   0.0  
 Mean   : 1228   Mean   : 231.4  
 3rd Qu.:  500   3rd Qu.:   0.0  
 Max.   :54250   Max.   :6500.0  </code></pre>
</div>
</div>
<section id="maps" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="maps"><span class="header-section-number">8.2.1</span> Maps</h3>
<p>The first thing we are going to do is plot the site locations. If you aren’t able to install <code>rnaturalearth</code>, just plot the sites and don’t put them on top of a map of Québec. We will talk about what all this code does and why we run it in lab today.</p>
<p>Our goal: plot the location of all the fires included in the study colored by the age of the fire.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>canada <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_states</span>(<span class="at">country=</span><span class="st">"Canada"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>canada <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">as_Spatial</span>(canada)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>quebec <span class="ot">&lt;-</span> canada[canada<span class="sc">$</span>name<span class="sc">==</span><span class="st">"Québec"</span>,]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>time_cols <span class="ot">&lt;-</span> viridis<span class="sc">::</span><span class="fu">magma</span>(<span class="dv">22</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">pty=</span><span class="st">"s"</span>, <span class="at">las=</span><span class="dv">1</span>, <span class="at">cex.lab=</span><span class="dv">2</span>, <span class="at">cex.axis=</span><span class="fl">1.5</span>, <span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>raster<span class="sc">::</span><span class="fu">plot</span>(quebec)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(dat<span class="sc">$</span>latitude <span class="sc">~</span> dat<span class="sc">$</span>longitude, <span class="at">pch=</span><span class="dv">19</span>, <span class="at">col=</span><span class="st">"black"</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dat<span class="sc">$</span>latitude <span class="sc">~</span> dat<span class="sc">$</span>longitude, <span class="at">type=</span><span class="st">"n"</span>, <span class="at">ylab=</span><span class="st">"Latitude"</span>, <span class="at">xlab=</span><span class="st">"Longitude"</span>, </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">axes=</span>F, </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">49</span>, <span class="dv">52</span>), <span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">74</span>, <span class="sc">-</span><span class="dv">67</span>))</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(dat<span class="sc">$</span>latitude <span class="sc">~</span> dat<span class="sc">$</span>longitude, <span class="at">bg=</span>time_cols[dat<span class="sc">$</span>time_since_fire], </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">21</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at=</span><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">74</span>, <span class="sc">-</span><span class="dv">67</span>, <span class="dv">1</span>)); <span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at=</span><span class="fu">seq</span>(<span class="dv">49</span>, <span class="dv">52</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Next, let’s create a boxplot showing the composite burn index values measured per fire, with boxes colored by the basal area of black spruce at the site prior to the fire.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># boxplot of CBI per unique fire</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>bp <span class="ot">&lt;-</span> <span class="fu">boxplot</span>(dat<span class="sc">$</span>CBI <span class="sc">~</span> dat<span class="sc">$</span>id_fire, </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">axes=</span>F, <span class="at">ylab=</span><span class="st">"Composite Burn Index"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab=</span><span class="st">""</span>, <span class="at">pch=</span><span class="cn">NA</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">col=</span>viridis<span class="sc">::</span><span class="fu">magma</span>(<span class="dv">256</span>, <span class="at">alpha=</span><span class="fl">0.6</span>)[<span class="fu">cut</span>(dat<span class="sc">$</span>basal_area_prefire_bs, <span class="dv">256</span>)],</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">stripchart</span>(dat<span class="sc">$</span>CBI <span class="sc">~</span> dat<span class="sc">$</span>id_fire, <span class="at">vertical=</span>T, <span class="at">add=</span>T,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">method=</span><span class="st">"jitter"</span>, <span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at=</span><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="fl">0.5</span>))</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at=</span><span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(bp<span class="sc">$</span>names)), <span class="at">labels =</span> bp<span class="sc">$</span>names, <span class="at">las=</span><span class="dv">3</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">cex.axis=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Scatterplots are one of the most basic plots we make all the time in ecology. Let’s make a plot of the relationship between the median thickness of residual organic matter (ROM) and the percent ericaceous cover by forest age. Let’s assume ROM predicts ericaceous cover. I’m not a plant person, but let’s go with that. Color the points by the age of the forest. Use a circle to show sites with a CBI less than 2, and a triangle for sites with a CBI between 2-3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatterplot of rom_med and ericaceous cover by forest age</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">pty=</span><span class="st">"s"</span>, <span class="at">las=</span><span class="dv">1</span>, <span class="at">cex.lab=</span><span class="dv">2</span>, <span class="at">cex.axis=</span><span class="fl">1.5</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dat<span class="sc">$</span>rom_med, dat<span class="sc">$</span>ericaceous_cover,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>viridis<span class="sc">::</span><span class="fu">magma</span>(<span class="dv">256</span>)[<span class="fu">cut</span>(dat<span class="sc">$</span>age, <span class="dv">256</span>)],</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch=</span><span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>)[<span class="fu">factor</span>(<span class="fu">cut</span>(dat<span class="sc">$</span>CBI, <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>)))],</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">"Ericaceous cover (%)"</span>, <span class="at">xlab=</span><span class="st">"Median Residual Organic Matter"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">axes=</span>F)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>); <span class="fu">axis</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Plot the density of the basal area of black spruce pre-fire. Fill in the area under the curve with a polygon. Add the points below the polygon, making it a raincloud plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dens <span class="ot">&lt;-</span> <span class="fu">density</span>(dat<span class="sc">$</span>basal_area_prefire_bs)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">las=</span><span class="dv">1</span>, <span class="at">pty=</span><span class="st">"s"</span>, <span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">cex.lab=</span><span class="dv">2</span>, <span class="at">cex.axis=</span><span class="fl">1.5</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dens<span class="sc">$</span>x, dens<span class="sc">$</span>y, <span class="at">type=</span><span class="st">"l"</span>, <span class="at">xlab=</span><span class="st">"Pre-fire basal area of black spruce"</span>, <span class="at">ylab=</span><span class="st">"Density"</span>, <span class="at">axes=</span>F,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">02</span>, .<span class="dv">1</span>))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>); <span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.1</span>, <span class="fl">0.02</span>))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">polygon</span>(<span class="at">x =</span> <span class="fu">c</span>(dens<span class="sc">$</span>x, <span class="fu">rev</span>(dens<span class="sc">$</span>x)), </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">y=</span><span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">length</span>(dens<span class="sc">$</span>y)), <span class="fu">rev</span>(dens<span class="sc">$</span>y)), </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">col=</span><span class="st">"#a0056588"</span>, <span class="at">border =</span> F)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">runif</span>(<span class="fu">length</span>(dat<span class="sc">$</span>basal_area_prefire_bs), <span class="sc">-</span><span class="fl">0.02</span>, <span class="sc">-</span><span class="fl">0.001</span>) <span class="sc">~</span> dat<span class="sc">$</span>basal_area_prefire_bs, <span class="at">pch=</span><span class="dv">19</span>, <span class="at">cex=</span><span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There aren’t really sensible types of data in this dataset for a barplot, which rarely convey much information anyways, but let’s create one just for fun.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>main_forest <span class="ot">&lt;-</span> <span class="fu">apply</span>(dat[,<span class="dv">16</span><span class="sc">:</span><span class="dv">18</span>], <span class="dv">1</span>, <span class="cf">function</span>(x){</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"bs"</span>, <span class="st">"jp"</span>, <span class="st">"bl"</span>)[<span class="fu">which.max</span>(x)]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>forest_counts <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">table</span>(dat<span class="sc">$</span>main_forest))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(forest_counts) <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">"Broadleaves"</span>, <span class="st">"Jack pine"</span>, <span class="st">"Black spruce"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(forest_counts, <span class="at">horiz=</span>T, <span class="at">las=</span><span class="dv">1</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">col=</span><span class="st">"black"</span>, <span class="at">border=</span>F, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">500</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="color-choice" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="color-choice"><span class="header-section-number">8.3</span> Color choice</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can install some packages in R to help with palettes</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># if you don't want to define them yourself</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># a few popular ones are viridis, RColorBrewer, and wesanderson</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>MetBrewer<span class="sc">::</span><span class="fu">display_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">256</span>, <span class="at">col=</span>viridis<span class="sc">::</span><span class="fu">magma</span>(<span class="dv">256</span>), <span class="at">pch=</span><span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("karthik/wesanderson")</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">col=</span>wesanderson<span class="sc">::</span><span class="fu">wes_palette</span>(<span class="st">"Moonrise2"</span>, <span class="dv">4</span>), <span class="at">pch=</span><span class="dv">19</span>, <span class="at">cex=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'wesanderson':
  method        from     
  print.palette MetBrewer</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lab4_files/figure-html/unnamed-chunk-7-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># there is also MetBrewer for art-inspired palettes</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># some of which are colorblind-friendly</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lab3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lab 3: Functions and for loops</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>